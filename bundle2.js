let aa=a=>a.map(b=>-b),t=(a,b)=>a.map((c,d)=>c+b[d]),z=(a,b)=>a.map((c,d)=>c-b[d]),ea=a=>{var b=ba;return a.map((c,d)=>c*b[d])},A=(a,b,c)=>a.map((d,e)=>d+c*b[e]),fa=()=>{var a=[0,0,0];return D.map((b,c)=>Math.max(b,a[c]))},ha=(a,b,c)=>a.map((d,e)=>d+c*(b[e]-d)),ia=(a,b,c)=>{b-=a;a+=(b>Math.PI?b-2*Math.PI:b<-Math.PI?b+2*Math.PI:b)*c;0>a&&(a+=2*Math.PI);a>2*Math.PI&&(a-=2*Math.PI);return a},F=([a,b,c],[d,e,f])=>a*d+b*e+c*f,ja=([a,b,c],[d,e,f])=>[b*f-c*e,c*d-a*f,a*e-b*d],ka=a=>A([0,0,0],a,1/(Math.sqrt(F(a,
a))||1)),pa=(a,b,c,d)=>{var e=Math.sign(b[2])||1,f=-1/(e+b[2]),h=b[0]*b[1]*f;let l=[1+e*b[0]*b[0]*f,e*h,-e*b[0]];e=[h,e+b[1]*b[1]*f,-b[1]];f=d*F(a,l);d*=F(a,e);h=[0,0,0];h=A(h,b,-c*F(a,b));h=A(h,l,f);return h=A(h,e,d)},qa,ra,H=a=>(qa=Math.cos(a),ra=Math.sin(a),[1,0,0,0,0,qa,ra,0,0,-ra,qa,0,0,0,0,1]),I=a=>(qa=Math.cos(a),ra=Math.sin(a),[qa,0,ra,0,0,1,0,0,-ra,0,qa,0,0,0,0,1]),sa=a=>(qa=Math.cos(a),ra=Math.sin(a),[qa,ra,0,0,-ra,qa,0,0,0,0,1,0,0,0,0,1]),ta=a=>[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,1],ua=([a,
b,c])=>[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1],va=([a,b,c],d)=>{let e=Math.sin(d);d=Math.cos(d);let f=1-d;return[a*a*f+d,b*a*f+c*e,c*a*f-b*e,0,a*b*f-c*e,b*b*f+d,c*b*f+a*e,0,a*c*f+b*e,b*c*f-a*e,c*c*f+d,0,0,0,0,1]},xa=ta(1),J=(a,b)=>{let c=[];for(let d=0;16>d;++d){let e=4*(d/4|0),f=d%4;c.push(b[e]*a[f]+b[e+1]*a[f+4]+b[e+2]*a[f+8]+b[e+3]*a[f+12])}return c},ya=(a,[b,c,d])=>{let e=a[3]*b+a[7]*c+a[11]*d+a[15]||1;return[(a[0]*b+a[4]*c+a[8]*d+a[12])/e,(a[1]*b+a[5]*c+a[9]*d+a[13])/e,(a[2]*b+a[6]*c+a[10]*d+a[14])/
e]},D,za=(a,b)=>(D=ka(ja(z(a[1].g,a[0].g),z(a[2].g,a[0].g))),{H:a,u:{j:D,w:F(D,a[0].g)},tag:b}),Aa=a=>({j:aa(a.j),w:-a.w}),Ba=(a,b,c,d,e,f)=>{let h=0,l=b.H.map(q=>{q=F(a.j,q.g)-a.w;q=-1E-5>q?2:1E-5<q?1:0;h|=q;return q});0==h&&(0<F(a.j,b.u.j)?c:d).push(b);1==h&&e.push(b);2==h&&f.push(b);if(3==h){c=[];d=[];for(let q=0;q<b.H.length;q++){var m=(q+1)%b.H.length,g=l[q];let n=l[m];var k=b.H[q];m=b.H[m];2!=g&&c.push(k);1!=g&&d.push(k);3==(g|n)&&(g=(a.w-F(a.j,k.g))/F(a.j,z(m.g,k.g)),k={g:ha(k.g,m.g,g),j:ka(ha(k.j,
m.j,g))},c.push(k),d.push(k))}3<=c.length&&e.push(za(c,b.tag));3<=d.length&&f.push(za(d,b.tag))}},Ca=()=>({u:0,m:0,l:0,J:[]}),L=a=>{a.J=a.J.map(c=>({H:c.H.map(d=>({g:d.g,j:aa(d.j)})).reverse(),u:Aa(c.u),tag:c.tag}));a.u=Aa(a.u);a.m&&L(a.m);a.l&&L(a.l);let b=a.m;a.m=a.l;a.l=b},Da=(a,b)=>{if(!a.u)return[...a.J];let c=[],d=[];b.map(e=>Ba(a.u,e,c,d,c,d));a.m&&(c=Da(a.m,c));d=a.l?Da(a.l,d):[];return[...c,...d]},N=(a,b)=>{a.J=Da(b,a.J);a.m&&N(a.m,b);a.l&&N(a.l,b)},Ea=a=>[...a.J,...(a.m?Ea(a.m):[]),...(a.l?
Ea(a.l):[])],O=(a,b)=>{if(b.length){a.u||(a.u=b[0].u);let c=[],d=[];b.map(e=>Ba(a.u,e,a.J,a.J,c,d));c.length&&(a.m||(a.m=Ca()),O(a.m,c));d.length&&(a.l||(a.l=Ca()),O(a.l,d))}},Q=(a,b)=>{let c=Ca(),d=Ca();O(c,a.B);O(d,b.B);N(c,d);N(d,c);L(d);N(d,c);L(d);O(c,Ea(d));return{B:Ea(c),F:`${"__d"}(${a.F},${b.F})`}},R=(a,b)=>{let c=Ca(),d=Ca();O(c,a.B);O(d,b.B);L(c);N(c,d);N(d,c);L(d);N(d,c);L(d);O(c,Ea(d));L(c);return{B:Ea(c),F:`${"__e"}(${a.F},${"__f"}(${b.F}))`}},Ha,Ia,Ja,ba,S=(a,b,c,d)=>{c*=Math.PI/2;
d*=Math.PI/2;c=[Math.cos(c)*Math.sin(d),Math.cos(d),Math.sin(c)*Math.sin(d)];Ia.push({g:t(Ja,ya(Ha,A(ea(b),c,a))),j:ya(Ha,c)})},U=(a,b,c,d,e,f,h,l,m)=>{let g=[];Ja=[b,c,d];ba=[1,1,1];Ha=J(J(I(l/180*Math.PI),H(m/180*Math.PI)),sa(0*Math.PI));var k=Math.atan((f-h)/e);let q=2*k/Math.PI,n=f*Math.sin(k),w=f*Math.cos(k),v=e+h*Math.sin(k);k=h*Math.cos(k);for(let E=0;16>E;++E){let y=E/4,B=(E+1)/4;Ia=[];S(w,[0,n,0],y,1);S(k,[0,v,0],y,1);S(k,[0,v,0],B,1);S(w,[0,n,0],B,1);g.push(za(Ia,a));for(var p=0;8>p;++p){var r=
p/4,u=(p+1)/4,x=u>1-q;x&&(u=1-q);Ia=[];S(h,[0,e,0],y,r);.01<r&&S(h,[0,e,0],B,r);S(h,[0,e,0],B,u);S(h,[0,e,0],y,u);g.push(za(Ia,a));if(x)break}for(p=8;0<p&&(r=(p-1)/4,u=p/4,(x=r<1-q)&&(r=1-q),Ia=[],S(f,[0,0,0],y,r),S(f,[0,0,0],B,r),1.99>u&&S(f,[0,0,0],B,u),S(f,[0,0,0],y,u),g.push(za(Ia,a)),!x);--p);}return{B:g,F:`${"__c"}(${a},${"__a"},[${b},${c},${d}],${e},${f},${h},${l},${m},${0})`}},V=(a,b,c,d,e,f,h,l,m,g,k)=>{let q=Math.max(4,Math.round(k/100)),n=[];Ha=J(J(I(l/180*Math.PI),H(m/180*Math.PI)),sa(g/
180*Math.PI));Ja=[b,c,d];ba=[-e,-f,-h];let w=(v,p,r,u,x,E,y,B)=>{r=[...r].map(T=>2*T-1);u=[...u].map(T=>2*T-1);Ia=[];S(k,r,v*x+E,v*y+B);S(k,u,v*x+E,v*y+B);S(k,u,p*x+E,p*y+B);S(k,r,p*x+E,p*y+B);n.push(za(Ia,a))};if(0<k)for(let v=0;v<q;++v)for(let p=0;p<q;++p)for(let r=0;8>r;++r){let u=v/q+r%4,x=(v+1)/q+r%4,E=p/q+(r/4|0),y=(p+1)/q+(r/4|0),B=[2*(!!(r&1)^!!(r&2))-1,2*!!(r&4)-1,2*!!(r&2)-1];Ia=[];S(k,B,u,E);.01<E&&S(k,B,x,E);1.99>y&&S(k,B,x,y);S(k,B,u,y);n.push(za(Ia,a));r||p||(w(u,x,"011","010",0,0,1,
1),w(u,x,"110","111",0,2,1,1),w(u,x,"001","000",0,0,1,0),w(u,x,"100","101",0,2,1,0),w(u,x,"010","110",0,1,1,1),w(u,x,"111","011",0,3,1,1),w(u,x,"000","100",0,1,1,0),w(u,x,"101","001",0,3,1,0),w(u,x,"010","000",1,0,0,1),w(u,x,"110","100",1,1,0,1),w(u,x,"111","101",1,2,0,1),w(u,x,"011","001",1,3,0,1))}e&&f&&h&&[[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(v=>n.push(za(v[0].map(p=>(D=A([e*(2*!!(p&1)-1),f*(2*!!(p&2)-1),
h*(2*!!(p&4)-1)],v[1],k),{g:t([b,c,d],ya(Ha,D)),j:ya(Ha,v[1])})),a)));return{B:n,F:`${"__b"}(${a},${"__a"},[${b},${c},${d}],[${e},${f},${h}],${l},${m},${g},${k})`}},Ka=(a,b,c,d,e,f,h,l)=>{D=z(ya(J(J(sa(-h/180*Math.PI),H(-f/180*Math.PI)),I(-e/180*Math.PI)),z(b,c)).map(Math.abs),d);b=Math;c=b.sqrt;d=fa();return[a,c.call(b,F(d,d))+Math.min(Math.max(...D),0)-l]},La=(a,b,c,d,e,f,h,l,m)=>{D=ya(J(J(sa(-m/180*Math.PI),H(-l/180*Math.PI)),I(-h/180*Math.PI)),z(b,c));c=(e-f)/d;h=Math.sqrt(1-c*c);b=[D[0],D[2],
0];b=[Math.sqrt(F(b,b)),D[1],0];l=F(b,[-c,h,0]);0>l?f=Math.sqrt(F(b,b))-e:l>h*d?(e=Math,c=e.sqrt,d=z(b,[0,d,0]),f=c.call(e,F(d,d))-f):f=F(b,[h,c,0])-e;return[a,f]},Ma=(a,b)=>a[1]<=b[1]?a:b,Na=(a,b)=>a[1]>b[1]?a:b,Oa=a=>[a[0],-a[1]],W=a=>{let b=[],c=[],d=[],e=[],f=new Function("__a,__b,__c,__d,__e,__f","return "+a.F);a.B.map(g=>{let k=b.length/3;g.H.map(q=>(b.push(...q.g),c.push(...q.j),d.push(g.tag)));for(let q=2;q<g.H.length;q++)e.push(k,k+q-1,k+q)});a=G.createBuffer();G.bindBuffer(34963,a);G.bufferData(34963,
new Uint16Array(e),35044);let h=G.createBuffer();G.bindBuffer(34962,h);G.bufferData(34962,new Float32Array(b),35044);let l=G.createBuffer();G.bindBuffer(34962,l);G.bufferData(34962,new Float32Array(c),35044);let m=G.createBuffer();G.bindBuffer(34962,m);G.bufferData(34962,new Float32Array(d),35044);return[{X:a,Y:e.length,ea:h,$:l,da:m},g=>f(g,Ka,La,Ma,Na,Oa)]},Sa=new Worker(URL.createObjectURL(new Blob([`let a=(${(()=>{var a=new function(){function c(g){return Math.sin(6.283184*g)}var d=[c,function(g){return.5>
g%1?1:-1},function(g){return g%1*2-1},function(g){g=g%1*4;return 2>g?g-1:3-g}],e,f,h,l,m;this.Z=function(){var g={ca:[{h:[1,15,164,0,1,127,128,15,0,36,0,28,87,0,0,0,0,64,1,1,2,38,128,1,3,255,2,212,8],p:[1,1,2,2,3,1,3,1,1,1,2,2,3,1,3,1,1,1,2,2,3,1,3,1,1],c:[{n:[135,147,142,149,147,140],f:[]},{n:[130,147,152,149,144,154],f:[]},{n:[135,147,142,149,147,140,,,,,,,161,156,151,135,,,,,,,,,138,150,145,157,131,143,135,147],f:[]}]},{h:[0,105,128,0,0,255,128,33,0,7,7,20,39,0,0,0,0,0,0,0,2,41,0,0,8,0,6,0,0],
p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,,99,,,99,,,,,,,,,111,,,,99,,,99],f:[]}]},{h:[1,55,128,0,1,81,128,0,0,0,52,6,0,0,0,0,0,243,10,1,2,135,0,0,3,147,6,230,4],p:[,,,,,,2,,,,1,,,,2,,3,4,1,5,6,7,2,8,3,4,1,5,6,7,2,8],c:[{n:[137],f:[]},{n:[,,135],f:[]},{n:[159],f:[]},{n:[157],f:[]},{n:[152],f:[]},{n:[154],f:[]},{n:[149],f:[]},{n:[147],f:[]}]},{h:[1,100,128,0,1,201,128,34,0,0,5,6,58,0,0,0,0,195,6,1,2,135,0,0,9,147,6,0,1],p:[,,,,,,,,1,1,3,3,2,3,2,3,1,1,3,3,2,3,2,3,
1,1,1,1],c:[{n:[111,,,111,,,111,,106,,,,,,,,104,,,104,,,104],f:[]},{n:[111,,,111,,,111,,106,,,,,,,,104,,,104,,,104,,109,,,109,,,109],f:[]},{n:[111,,,111,,,111,,106,,,,,,,,104,,,104,,,104,,109,,109,,109,,109],f:[]}]},{h:[0,255,116,64,0,255,116,0,64,0,4,6,35,0,0,0,0,0,0,0,2,14,0,19,32,0,0,93,1],p:[,,,,,,,,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,3],c:[{n:[,,147,,,,,,,,,,147,,,,147,,,,,,,,147,,,,,,,,,,,,,,,,123,,,123],f:[]},{n:[147,,,147,,,,,,,,,147,,,,147,,,,,,,,147,,,,,,,,,,,,,,,,123,,,123],f:[]},{n:[147],
f:[]}]},{h:[1,11,128,0,1,111,128,25,0,0,72,6,115,0,0,0,0,53,6,1,2,135,0,0,3,255,6,168,9],p:[,,,,,,,,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8],c:[{n:[147,138,145,150,159,149,142,161],f:[]},{n:[,,,,,,,,140,,159,147,,149,,154,,,,161],f:[]},{n:[,,,,,,,145,,150,,,149,,,147,,143,,,,154,,,142],f:[]},{n:[,,,,,,145,,,149,,,142,,,138,,,,,137,,,135,,,142],f:[]},{n:[,,,,,,,,,,,150,142,145,,,,,,,,,,,,,,152,145],f:[]},{n:[,,,,,,,,,,,,135,150,142,159],f:[]},{n:[,,,,149,,154,145,,,,,,,,,,,,,138,,143],f:[]},
{n:[,,,,138,147,,,,143,,,149,,142,,150,154,145,,,,154,159,149],f:[]}]},{h:[3,0,128,0,3,68,128,0,64,218,4,4,40,0,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,,140,,,,,,,,,147,,,,,140,,140,,,,,,,,,147],f:[]}]}],T:6615,S:32,V:31,aa:7};e=g;f=g.V;h=0;l=g.T*g.S*(f+1)*2;m=new Int32Array(l)};this.W=function(){var g,k,q,n,w,v=new Int32Array(l),p=e.ca[h],r=e.T,u=e.S,x=0,E=0,y;var B=!1;var T=[];for(k=0;k<=f;++k){var P=p.p[k];for(q=0;q<u;++q){if(w=P?p.c[P-1].f[q]:
0)p.h[w-1]=p.c[P-1].f[q+u]||0,17>w&&(T=[]);var cb=d[p.h[16]],M=p.h[17]/512,na=2**(p.h[18]-9)/r,db=p.h[19],Pa=p.h[20],ca=135.82764118168*p.h[21]/44100,Fa=1-p.h[22]/255,da=1E-5*p.h[23],mc=p.h[24]/32,nc=p.h[25]/512,oc=6.283184*2**(p.h[26]-9)/r,Eb=p.h[27]/255,eb=p.h[28]*r&-2;w=(k*u+q)*r;for(n=0;4>n;++n)if(g=P?p.c[P-1].n[q+n*u]:0){if(!T[g]){var C=T;var oa=g;var Fb=y=void 0,Qa,la,K=p,Gb=g,pc=d[K.h[0]],qc=K.h[1],rc=K.h[3]/32,sc=d[K.h[4]],tc=K.h[5],uc=K.h[8]/32,Hb=K.h[9],wa=K.h[10]*K.h[10]*4,Ra=K.h[11]*K.h[11]*
4,fb=K.h[12]*K.h[12]*4,vc=1/fb,wc=-K.h[13]/16,Ga=K.h[14],xc=r*2**(2-K.h[15]),Ib=new Int32Array(wa+Ra+fb),Jb=0,Kb=0;for(Qa=la=0;la<wa+Ra+fb;la++,Qa++){0<=Qa&&(Ga=Ga>>8|(Ga&255)<<4,Qa-=xc,Fb=.003959503758*2**((Gb+(Ga&15)+K.h[2]-128-128)/12),y=.003959503758*2**((Gb+(Ga&15)+K.h[6]-128-128)/12)*(1+8E-4*K.h[7]));var ma=1;la<wa?ma=la/wa:la>=wa+Ra&&(ma=(la-wa-Ra)*vc,ma=(1-ma)*3**(wc*ma));Jb+=Fb*ma**rc;var gb=pc(Jb)*qc;Kb+=y*ma**uc;gb+=sc(Kb)*tc;Hb&&(gb+=(2*Math.random()-1)*Hb);Ib[la]=80*gb*ma|0}C[oa]=Ib}oa=
T[g];g=0;for(C=2*w;g<oa.length;g++,C+=2)v[C]+=oa[g]}for(g=0;g<r;g++)n=2*(w+g),(C=v[n])||B?(B=ca,db&&(B*=cb(na*n)*M+.5),B=1.5*Math.sin(B),x+=B*E,C=Fa*(C-E)-x,E+=B*C,C=3==Pa?E:1==Pa?C:x,da&&(C*=da,C=1>C?-1<C?c(.25*C):-1:1,C/=da),C*=mc,B=1E-5<C*C,oa=Math.sin(oc*n)*nc+.5,y=C*(1-oa),C*=oa):y=0,n>=eb&&(y+=v[n-eb+1]*Eb,C+=v[n-eb]*Eb),v[n]=y|0,v[n+1]=C|0,m[n]+=y|0,m[n+1]+=C|0}}h++;return h/e.aa};this.U=function(){var g=44+2*l-8,k=g-36,q=new Uint8Array(44+2*l);q.set([82,73,70,70,g&255,g>>8&255,g>>16&255,g>>
24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,k&255,k>>8&255,k>>16&255,k>>24&255]);g=0;for(k=44;g<l;++g){var n=m[g];n=-32767>n?-32767:32767<n?32767:n;q[k++]=n&255;q[k++]=n>>8&255}return q};this.getData=function(g,k){for(var q=2*Math.floor(44100*g),n=Array(k),w=0;w<2*k;w+=1){var v=q+w;n[w]=0<g&&v<m.length?m[v]/32768:0}return n}};a.Z();var b=setInterval(function(){if(1<=a.W()){clearInterval(b);var c=a.U();self.postMessage(c,c.buffer)}},10)}).toString()})();self.postMessage(a,[a.buffer])`]))),
Ta=new Promise(a=>{Sa.onmessage=b=>a(b.data)}),Ua=!1,Va=()=>{Ua||(Ua=!0,Ta.then(a=>{var b=document.createElement("audio");b.src=URL.createObjectURL(new Blob([a],{type:"audio/wav"}));b.volume=.8;b.loop=!0;b.play()}))},Wa=()=>({C:0,D:0,s:{}}),X=Wa();var Xa;let Ya=0,Za=0;document.onmousemove=a=>{let b=a.movementX;a=a.movementY;(1E4>b*b||0>b*Ya)&&(1E4>a*a||0>a*Za)&&(X.C+=Ya=b,X.D+=Za=a)};document.onmousedown=a=>{document.pointerLockElement!==CC?(Xa=1,Va(),CC.requestPointerLock()):X.s[a.button]=1};
document.onmouseup=a=>{X.s[a.button]=0};document.onkeydown=a=>{X.s[a.code[3]]=1;return!1};document.onkeyup=a=>{X.s[a.code[3]]=0};
let $a=(a,b)=>{for(let c in b.s)a.s[c]|=b.s[c];a.C+=b.C;a.D+=b.D},ab=W(V(0,0,0,0,1,1,1,0,0,0,0))[0],bb=W(V(3,0,0,0,0,0,0,0,0,0,50))[0],[hb]=W(R(R(Q(R(R(R(U(2,400,0,0,800,80,80,90,90),V(2,0,0,0,60,200,200,0,0,0,0)),V(2,284,0,0,208,200,200,0,0,0,0)),V(2,-284,0,0,208,200,200,0,0,0,0)),U(4,0,0,0,160,76,48,0,-90)),V(4,0,0,-360,200,200,200,0,0,0,0)),U(5,0,0,0,160,40,40,0,-90))),ib=R(R(R(R(R(R(R(R(R(R(R(R(R(Q(Q(Q(Q(R(V(6,0,0,0,130,100,130,0,0,0,0),V(6,0,110,0,100,25,100,0,0,0,0)),U(6,100,-119,100,400,50,
50,0,0)),U(6,100,-120,-100,400,50,50,0,0)),U(6,-100,-120,-100,400,50,50,0,0)),U(6,-100,-120,100,400,50,50,0,0)),V(6,0,-150,0,200,100,200,0,0,0,0)),R(U(4,100,-120,100,340,40,40,0,0),V(4,100,-50,100,50,170,50,0,0,0,0))),R(U(4,100,0,-100,340,40,40,0,0),V(4,100,-50,-100,50,170,50,0,0,0,0))),R(U(4,-100,-120,-100,340,40,40,0,0),V(4,-100,-50,-100,50,170,50,0,0,0,0))),R(U(4,-100,-120,100,340,40,40,0,0),V(4,-100,-50,100,50,170,50,0,0,0,0))),V(6,0,250,0,200,100,200,0,0,0,0)),V(5,0,-75,0,1,50,200,0,0,0,30)),
V(5,0,-75,0,1,50,200,90,0,0,30)),V(5,0,-30,0,100,100,100,0,0,0,0)),V(4,0,150,100,200,20,10,0,0,0,0)),V(4,0,150,-100,200,20,10,0,0,0,0)),V(4,100,150,0,10,20,200,0,0,0,0)),V(4,-100,150,0,10,20,200,0,0,0,0)),[jb]=W(ib),kb=Array(8),lb=0;
for(let a=-100;150>a;a+=200)for(let b=-50;200>b;b+=200)for(let c=-100;150>c;c+=200){var mb,nb=V(1,a,b,c,80,80,80,360*Math.random(),360*Math.random(),360*Math.random(),20);let d=Ca(),e=Ca();O(d,ib.B);O(e,nb.B);L(d);N(e,d);L(e);N(d,e);N(e,d);O(d,Ea(e));L(d);mb={B:Ea(d),F:""};let f=W(mb);kb[lb++]=f[0]}
let ob=[()=>[W(R(V(0,0,-1283,0,2E4,1500,2E4,0,0,0,0),V(0,0,1200,0,200,1E3,1E3,0,0,0,200))),[[0,30,1E3]]],()=>[W(Q(R(V(0,0,-891,1498,500,1E3,2E3,0,0,0,0),V(1,0,500,317,150,300,900,0,0,0,200)),V(2,0,-461,3875,450,1E3,500,0,0,0,0))),[[0,30,1E3],[0,140,3E3]]],()=>[W(Q(Q(Q(R(V(0,0,-903,1498,1026,1E3,2E3,0,0,0,0),V(1,0,500,317,150,300,900,0,0,0,200)),V(2,950,-461,2375,50,1E3,1E3,0,0,0,0)),V(2,-950,-461,2375,50,1E3,1E3,0,0,0,0)),V(2,0,-461,3342,50,1E3,1E3,90,0,0,0))),[[500,140,3E3],[-500,140,3E3],[0,140,
3E3]]],()=>[W(Q(Q(Q(V(0,0,-1E3,598,300,1E3,915,0,0,0,0),V(0,-715,-1E3,1213,300,1E3,584,90,0,0,0)),V(0,-1413,-1E3,598,300,1E3,915,0,0,0,0)),V(2,-1684,-238,1406,382,360,271,48,0,0,0))),[[0,38,1213],[-1415,38,1213],[-1415,38,0]]],()=>[W(Q(Q(Q(Q(V(0,0,-1E3,1500,1026,1E3,2E3,0,0,0,0),V(1,0,85,978,328,360,494,0,0,0,0)),V(1,0,85,1787,328,1154,494,0,0,0,0)),V(1,0,799,-66,328,20,494,0,0,0,0)),V(1,0,1185,-348,328,385,212,0,0,0,0))),[[0,950,500],[0,600,500],[0,1250,500]]],()=>[W(R(R(Q(Q(R(V(0,0,-903,336,507,
1E3,497,0,0,0,0),V(1,0,500,-295,150,300,900,0,0,0,200)),V(2,0,-550,1266,330,100,652,0,0,0,0)),V(0,0,-903,2147,507,1E3,497,0,0,0,0)),V(1,0,500,2762,150,300,900,0,0,0,200)),V(5,0,-200,3504,1,1,900,0,0,0,130))),[[0,-309,1248],[0,-275,2584]]],()=>[W(R(Q(R(V(0,37,-903,576,535,1E3,906,0,0,0,0),V(1,0,463,-411,150,300,900,0,0,0,200)),V(2,-488,92,576,39,1130,1081,0,0,0,0)),U(2,-264,476,1036,500,200,200,90,90))),[[0,320,830],[0,462,1030],[-1E3,462,1030]]],()=>[W(R(V(0,0,-800,1100,1026,1E3,1451,0,0,0,0),V(1,
0,521,-230,1326,360,1540,0,0,0,200))),[[-400,450,1500],[0,500,1500],[400,450,1500]]],()=>[W(Q(R(V(1,0,201,1371,1376,2029,1008,0,0,0,0),V(1,0,0,579,1,1,1,0,0,0,400)),V(2,0,-50,0,50,50,50,0,0,0,0))),[[230,201,446],[-230,201,446],[210,-253,446],[-210,-253,446]]]],pb=ob.length-1,qb,rb,sb,tb=[2,2,3,3,3,3,3,3,3],ub="SMASH THE CASTLE;SMASH ALL THE CASTLES;RE-USE THE CANNON;USE THE CANNON TO SLOW DOWN;SHOOT INTO THE AIR;MIND THE GAP;BLAST THROUGH THE WALL;USE THE RAMP;RIDE THE CURVE".split(";"),vb=a=>{for(let c=
0,d=a,e,f,h;50>c;++c){[f,e]=sb(d);var b=d;h=ka([sb(t(b,[.001,0,0]))[1]-sb(z(b,[.001,0,0]))[1],sb(t(b,[0,.001,0]))[1]-sb(z(b,[0,.001,0]))[1],sb(t(b,[0,0,.001]))[1]-sb(z(b,[0,0,.001]))[1]]);if(.001>e)return e=z(a,d),[d,.001>F(e,e)?h:ka(e),Math.sqrt(F(e,e)),f];d=A(d,h,-e)}},wb=new (window.AudioContext||webkitAudioContext),xb=a=>{let b=wb.createBuffer(1,a.length,44100),c=wb.createBufferSource();b.getChannelData(0).set(a);c.buffer=b;c.connect(wb.destination);c.start()},yb=(a=1,b=.05,c=220,d=0,e=0,f=.1,
h=0,l=1,m=0,g=0,k=0,q=0,n=0,w=0,v=0,p=0,r=0,u=1,x=0,E=0)=>{let y=2*Math.PI,B=m*=500*y/44100/44100;b=c*=(1+2*b*Math.random()-b)*y/44100;let T=[],P=0,cb=0,M=0,na=1,db=0,Pa=0,ca=0,Fa,da;d=44100*d+9;x*=44100;e*=44100;f*=44100;r*=44100;g*=500*y/44100**3;v*=y/44100;k*=y/44100;q*=44100;n=44100*n|0;for(da=d+x+e+f+r|0;M<da;T[M++]=ca)++Pa%(100*p|0)||(ca=h?1<h?2<h?3<h?Math.sin((P%y)**3):Math.max(Math.min(Math.tan(P),1),-1):1-(2*P/y%2+2)%2:1-4*Math.abs(Math.round(P/y)-P/y):Math.sin(P),ca=(n?1-E+E*Math.sin(y*
M/n):1)*(0<ca?1:-1)*Math.abs(ca)**l*a*.3*(M<d?M/d:M<d+x?1-(M-d)/x*(1-u):M<d+x+e?u:M<da-r?(da-M-r)/f*u:0),ca=r?ca/2+(r>M?0:(M<da-r?1:(da-M)/r)*T[M-r|0]/2):ca),Fa=(c+=m+=g)*Math.cos(v*cb++),P+=Fa-Fa*w*(1-1E9*(Math.sin(M)+1)%2),na&&++na>q&&(c+=k,b+=k,na=0),!n||++db%n||(c=b,m=B,na=na||1);return T},zb=yb(...[1.27,,478,.02,.02,.06,1,2.75,,,,,,.9,45,.5,,.59,,.26]),Ab=yb(...[1.37,,827,.02,.01,.32,4,4.22,,.5,,,,1.7,,.6,,.47]),Bb=yb(...[2,.1,185,.03,,.61,4,4,,,,,,1,,1,.5,.8,.1,.1]),Cb=yb(...[2.11,0,97.99886,
.08,.7,.34,,1.92,-.5,10,50,.02,.12,,,.1,.06,.17,.01,.66]),Db=yb(...[2.11,0,261.6256,.08,.76,.35,,1.92,,,-50,-.01,.2,,,.1,.06,.27,.09,.2]),Lb=()=>({mode:0,N:0,P:0,v:Math.PI,pitch:0,g:[0,10,0],i:[0,0,0],L:0,O:[0,0,0],K:100,A:tb[0],o:[],I:0,level:0,M:0}),Mb=(a,b,c)=>{var d=b.mode,e=b.N,f=b.P,h=b.v,l=b.pitch,m=ha(a.g,b.g,c);a=a.K;return{mode:d,N:e,P:f,v:h,pitch:l,g:m,i:b.i,L:b.L,O:b.O,K:a+c*(b.K-a),A:b.A,o:b.o,I:b.I,level:b.level,M:b.M}},Nb=!0,Ob=Array(7).fill(0),Pb=a=>{a=a();let b=new Uint8Array(1048576);
for(let c=0;64>c;++c)for(let d=0;64>d;++d)for(let e=0;64>e;++e)a(c/64,d/64,e/64,4*(c+e%8*64+512*(d+64*Math.floor(e/8))),b);return b},Qb=(a,b)=>{let c=new Worker(URL.createObjectURL(new Blob([`let a=(${Pb.toString()})(${b.toString()});self.postMessage(a,[a.buffer])`])));(new Promise(d=>{c.onmessage=e=>d(e.data)})).then(d=>{let e=G.createTexture();G.bindTexture(3553,e);G.texImage2D(3553,0,6408,512,512,0,6408,5121,d);G.texParameteri(3553,10241,9728);G.texParameteri(3553,10240,9728);G.texParameteri(3553,
10242,10497);G.texParameteri(3553,10243,10497);Ob[a]=e})},Rb=new Uint8Array(1048576);for(let a=0;a<Rb.length;++a)Rb[a]=255;let Sb=G.createTexture();G.bindTexture(3553,Sb);G.texImage2D(3553,0,6408,512,512,0,6408,5121,Rb);G.texParameteri(3553,10241,9728);G.texParameteri(3553,10240,9728);G.texParameteri(3553,10242,10497);G.texParameteri(3553,10243,10497);Qb(0,()=>(a,b,c,d,e)=>{a=.6-.1*Math.pow(Math.random(),4)+.1*Math.pow(Math.random(),4);e[d+0]=76.5;e[d+1]=255*a;e[d+2]=63.75*a});
Qb(1,()=>{let a=Array(40).fill(void 0).map(()=>[Math.random(),Math.random(),Math.random()]);return(b,c,d,e,f)=>{let h=Infinity,l=Infinity;for(let [q,n,w]of a){var m=b,g=c,k=d;let v=(m=Math.abs(m-q),m=Math.min(m,1-m),g=Math.abs(g-n),g=Math.min(g,1-g),k=Math.abs(k-w),k=Math.min(k,1-k),Math.hypot(m,g,k));v<h?(l=h,h=v):v<l&&(l=v)}b=Math.abs(h-l);b=.04>b?.3+3*b:.4+.6*b;b-=.1*b*Math.pow(Math.random(),8);b+=.1*b*Math.pow(Math.random(),8);f[e+0]=230*b;f[e+1]=200*b;f[e+2]=255*b}});
Qb(2,()=>{let a=b=>.25*(Math.sin(10*b)+.5*Math.sin(17*b)+.25*Math.sin(21*b)+.25*Math.sin(23*b)+Math.sin(29*b)+.5*Math.sin(31*b)+.25*Math.sin(37*b)+.25*Math.sin(51*b));return(b,c,d,e,f)=>{let h=Math.pow(Math.random(),8);b=.075*(a(5*b)+a(5*d)+a(.2*c))+.75;b-=.05*h;f[e+0]=255*b;f[e+1]=220*b;f[e+2]=200*b}});
Qb(3,()=>(a,b,c,d,e)=>{let f=Math.pow(Math.random(),4),h=Math.pow(Math.random(),4);.5<a&&(a=1-a);.5<b&&(b=1-b);.5<c&&(c=1-c);let l=.05>Math.hypot(a,c);c=.05>Math.hypot(b,c);a=.05>Math.hypot(a,b)||l||c?.5:1;e[d+0]=100*a*(.6-.1*f+.1*h);e[d+1]=150*a*(.6-.1*f+.1*h);e[d+2]=180*a*(.6-.1*f+.1*h)});Qb(4,()=>(a,b,c,d,e)=>{a=Math.pow(Math.random(),4);b=Math.pow(Math.random(),4);e[d+0]=100*(.6-.1*a+.1*b);e[d+1]=150*(.6-.1*a+.1*b);e[d+2]=180*(.6-.1*a+.1*b)});
Qb(5,()=>(a,b,c,d,e)=>{a=Math.pow(Math.random(),4);b=Math.pow(Math.random(),4);e[d+0]=50*(.6-.1*a+.1*b);e[d+1]=75*(.6-.1*a+.1*b);e[d+2]=90*(.6-.1*a+.1*b)});Qb(6,()=>(a,b,c,d,e)=>{a+=(2*Math.random()-1)/64;b+=(2*Math.random()-1)/64;c+=(2*Math.random()-1)/64;a=4*(a+.03)%1;c=4*(c+.03)%1;b=8*b%1;let f=.9;f-=.1*f*Math.pow(Math.random(),8);f+=.1*f*Math.pow(Math.random(),8);.05<a&&.95>a&&.05<c&&.95>c&&.1<b&&.9>b?(e[d+0]=80*f,e[d+1]=90*f,e[d+2]=100*f):(e[d+0]=80*f,e[d+1]=70*f,e[d+2]=60*f)});
let Tb=a=>{G.uniform1iv(G.getUniformLocation(a,"a4"),Ob.map((b,c)=>(G.activeTexture(33984+c),G.bindTexture(3553,b||Sb),c)))},Y=C2.getContext("2d"),Ub=G.createTexture(),Vb=0;G.bindTexture(3553,Ub);G.texParameteri(3553,10241,9728);G.texParameteri(3553,10240,9728);G.texParameteri(3553,10242,33071);G.texParameteri(3553,10243,33071);let Wb=G.createBuffer();G.bindBuffer(34962,Wb);G.bufferData(34962,Float32Array.of(-1,-1,1,-1,-1,1,1,1,-1,1,1,-1),35044);G.enable(2929);G.enable(3042);G.blendFunc(770,771);
G.depthFunc(515);let Xb=G.createBuffer();G.bindBuffer(34963,Xb);G.bufferData(34963,new Uint16Array(Array(300).fill(0).map((a,b)=>b)),35044);let Yb=G.createBuffer();G.bindBuffer(34962,Yb);G.bufferData(34962,new Float32Array(900),35048);
let Zb=(a,b)=>{let c=G.createShader(35633),d=G.createShader(35632),e=G.createProgram();G.shaderSource(c,a);G.compileShader(c);G.shaderSource(d,b);G.compileShader(d);G.attachShader(e,c);G.attachShader(e,d);G.linkProgram(e);return e},Z=Zb("attribute vec3 a1,ah;attribute float a9;uniform mat4 a2,a3;varying vec3 af,a6;varying float a8;void main(){af=a1,a6=normalize((a3*vec4(ah,0)).xyz),a8=a9,gl_Position=a2*a3*vec4(a1,1);}","precision highp float;varying vec3 af,a6;varying float a8;uniform sampler2D a4[7];uniform vec3 ag;void main(){vec3 v=floor(fract(af*.005+.01)*64.);vec2 a=(v.xy+vec2(mod(v.z,8.),floor(v.z/8.))*64.+vec2(.5))/512.;vec4 i;int t=int(a8+.5);if(t==0)i=texture2D(a4[0],a);if(t==1)i=texture2D(a4[1],a);if(t==2)i=texture2D(a4[2],a);if(t==3)i=texture2D(a4[3],a);if(t==4)i=texture2D(a4[4],a);if(t==5)i=texture2D(a4[5],a);if(t==6)i=texture2D(a4[6],a);float r=dot(a6,normalize(vec3(5,1,5)));vec3 c=mix(mix(vec3(.9,.42,.44)+.1,vec3(1),.3),mix(vec3(1,.86,.39),vec3(1),.3),.5+.5*r);float n=.75+.25*max(0.,r),f=length(af.xz-ag.xz);if(f<20.&&af.y<ag.y)n*=1.-clamp(.5-.1*(f-5.),0.,.4);gl_FragColor=vec4(i.xyz*c*n,1);}"),
$b=Zb("attribute vec3 a1,ah;attribute float a9;uniform mat4 aa;varying vec3 af;void main(){af=a1,gl_Position=(aa*vec4(a1,1)).xyww;}","precision highp float;varying vec3 af;void main(){vec3 m=normalize(af);float l=dot(normalize(vec3(5,1,5)),m),g=max(0.,500.*l-495.);vec3 x=mix(vec3(.13,.16,.31),vec3(.9,.42,.44),1.-2.*m.y),u=mix(mix(x,vec3(1,.86,.39),clamp(exp(l-1.)-.5*m.y,0.,1.)),vec3(1),g);gl_FragColor=vec4(u,1);}"),ac=Zb("attribute vec3 a1;uniform mat4 a2,a3;void main(){gl_Position=a2*a3*vec4(a1,1);}",
"precision highp float;uniform vec3 a0;void main(){gl_FragColor=vec4(a0,.25);}"),bc=Zb("attribute vec2 a1;void main(){gl_Position=vec4(a1,0,1);}","precision highp float;uniform sampler2D a4;uniform vec4 a5;void main(){vec2 a=gl_FragCoord.xy/a5.xy;vec4 i=texture2D(a4,vec2(a.x,1.-a.y));gl_FragColor=mix(vec4(mix(vec3(0),i.xyz,a5.w),1),i,a5.z);}"),cc=(a,b)=>{G.bindBuffer(34962,a.ea);let c=G.getAttribLocation(b,"a1");G.enableVertexAttribArray(c);G.vertexAttribPointer(c,3,5126,!1,0,0);G.bindBuffer(34962,
a.$);c=G.getAttribLocation(b,"ah");0<=c&&(G.enableVertexAttribArray(c),G.vertexAttribPointer(c,3,5126,!1,0,0),G.bindBuffer(34962,a.da),c=G.getAttribLocation(b,"a9"),G.enableVertexAttribArray(c),G.vertexAttribPointer(c,1,5126,!1,0,0));G.bindBuffer(34963,a.X);G.drawElements(4,a.Y,5123,0)},dc=xa,ec=0,fc=0,gc=0,hc=0,ic=0,jc=[0,0,0],kc=[0,0,0],lc=[0,0,0],yc,zc=0,Ac,Bc=[],Cc=[],Dc=()=>{G.viewport(0,0,C2.width=CC.width=window.innerWidth/2,C2.height=CC.height=window.innerHeight/2);Ac=9},Ec=(a,b,c)=>{Y.fillText(a,
b,c);Y.strokeText(a,b,c)},Fc=(a,b,c)=>{let d=J(J(ua(lc),ta(.2)),dc);G.useProgram(b);G.uniformMatrix4fv(G.getUniformLocation(b,"a3"),!1,d);G.uniformMatrix4fv(G.getUniformLocation(b,"a2"),!1,a);b==ac?G.uniform3fv(G.getUniformLocation(b,"a0"),c):Tb(b);cc(bb,b)},Gc=Lb(),Hc=Lb();[document.body,CC].map(a=>{a=a.style;a.overflow="hidden";a.margin=0;a.width="100%";a.height="100%";a.cursor="pointer"});
let Ic=0,Jc=0,Kc=Wa(),Lc=a=>{requestAnimationFrame(Lc);Jc=Jc||a;var b=Math.min(a-Jc,1E3),c=X;X=Wa();$a(X,c);X.C=X.D=0;var d=document.pointerLockElement==CC?c:Wa();c=0;Ic+=b;Jc=a;for($a(Kc,d);33<Ic;){c=1;Ic-=33;Gc=Hc;a=Hc;var e=Kc;a=Mb(a,a,0);a.I++;a.M++;0!=a.mode&&4!=a.mode&&5!=a.mode&&(a.v+=.005*e.C,a.pitch+=.005*e.D,a.pitch=Math.max(-1.57,Math.min(1.57,a.pitch)),0>a.v&&(a.v+=2*Math.PI),a.v>2*Math.PI&&(a.v-=2*Math.PI));d=ya(J(I(a.v),H(-a.pitch)),[0,0,-1]);var f=!a.N&&e.s[0];a.N=e.s[0];var h=qb;if(3==
a.mode&&(e.s.R||-1E3>a.g[1]))a.mode=4,a.I=0,a.A=0;else{if(0==a.mode)Xa&&(xb(Cb),a.mode=2);else if(1==a.mode||2==a.mode){a.i=A(a.i,[0,-.6,0],.5);var l=a.g;for(var m=0;4>m;++m){l=A(l,a.i,.25);for(var g=0;g<h.length;++g){var k;if(k=!(0<=a.o.indexOf(g)))k=z(h[g],l),k=3600>F(k,k);k&&(xb(Bb),a.o.push(g))}}a.o.length==h.length&&(a.I=0,a.mode=5);if((1==a.mode||Nb)&&f||2==a.mode&&!Nb&&!e.s[0]&&0<a.A)xb(Ab),--a.A,a.mode=3,a.i=A([0,0,0],d,30),a.L=0,Nb=!1;a.g=A(a.g,a.i,.5);let [v,p,r]=vb(a.g);10>r&&0>F(p,a.i)&&
(a.g=A(v,p,10),a.i=pa(a.i,p,.2,.8))}else if(3==a.mode||4==a.mode||5==a.mode){a.i=t(a.i,[0,-.6,0]);if(3==a.mode){e=a.g;for(l=0;4>l;++l)for(e=A(e,a.i,.25),m=0;m<h.length;++m){if(g=!(0<=a.o.indexOf(m)))g=z(h[m],e),g=3600>F(g,g);g&&(xb(Bb),a.o.push(m))}a.o.length==h.length&&(a.I=0,a.mode=5);f&&(a.I=0,a.mode=0<a.A?2:4)}else 30<a.I&&(5==a.mode?a.level<pb&&(xb(Cb),f=a.level+1,a=Lb(),a.mode=1,a.level=f,a.A=tb[f]):(xb(Db),f=a.level,a=Lb(),a.mode=1,a.level=f,a.A=tb[f]));a.g=t(a.g,a.i);let [v,p,r,u]=vb(a.g);
10>r&&0>F(p,a.i)&&(10<a.M&&xb(zb),a.M=0,a.g=A(v,p,10),a.i=pa(a.i,p,2==u?.9:.2,.998),f=a.i,a.L=Math.sqrt(F(f,f))/10/33,a.O=aa(ka(ja(a.i,p))))}f=a;h=a.K;b:{d=aa(d);m=l=0;for(g=a.g;50>l&&100>m;++l){e=sb(g)[1];m+=e;if(.001>e){d=m;break b}g=A(g,d,e)}d=100}f.K=h+.5*(d-h)}Hc=a;Kc.C=Kc.D=0}c&&(Kc=Wa());a=Kc;c=Mb(Gc,Hc,Ic/33);if(4==c.mode||5==c.mode)a.C=a.D=0;e=.005*a.C+c.v;l=.005*a.D+c.pitch;l=Math.max(-1.5,Math.min(1.5,l));zc+=b;c.P?gc=500:0<gc?(ec+=.02*b*(l-ec),fc=ia(fc,e,.02*b),gc-=b):(ec=l,fc=e);a=ya(J(I(fc),
H(-ec)),[0,0,-c.K]);jc=ha(jc,3==c.mode||4==c.mode||5==c.mode?[0,20,0]:[-20,30,0],.01*b);dc=J(va(c.O,c.L*b),dc);d=J(H(ec),I(-fc));f=J(I(fc),H(-ec));a=J(d,ua(z(a,t(c.g,ya(f,jc)))));f=[CC.height/CC.width,0,0,0,0,1,0,0,0,0,10000.1/-9999.9,-1,0,0,2E3/-9999.9,0];a=J(f,a);h=0;if(3==c.mode||4==c.mode||5==c.mode)lc=c.g,h=3==c.mode&&100>zc,Fc(a,Z,0);if(1==c.mode||2==c.mode)hc+=.01*b*(l-hc),ic=ia(ic,e,.01*b),kc=c.g,h=1;if(h||0==c.mode)0==c.mode&&(ic=1,hc=-.5,kc=c.g),m=J(J(ua(kc),J(I(ic),H(-hc))),ta(.12)),G.useProgram(Z),
G.uniformMatrix4fv(G.getUniformLocation(Z,"a3"),!1,m),G.uniformMatrix4fv(G.getUniformLocation(Z,"a2"),!1,a),Tb(Z),cc(hb,Z);e=qb;for(l=0;l<e.length;++l)if(0<=c.o.indexOf(l)){if(0>Bc.indexOf(l)){Bc.push(l);m=Cc;g=m.push;k=e[l];var q=c.i;let v=[],p=0;for(let r=-100;150>r;r+=200)for(let u=-50;200>u;u+=200)for(let x=-100;150>x;x+=200)v.push({kind:p++,g:A(k,[r,u,x],.25),i:A(A([0,0,0],q,.8/33),[r,(u+100)/2,x],.001),offset:aa([r,u,x]),axis:ka([2*Math.random()-1,2*Math.random()-1,2*Math.random()-1]),ba:.01*
Math.random(),rotation:xa});g.call(m,...v)}}else m=J(J(ua(t(e[l],[0,10*Math.sin(zc/800),0])),ta(.25)),J(I(zc/1E3+l),H(.15))),G.useProgram(Z),G.uniformMatrix4fv(G.getUniformLocation(Z,"a3"),!1,m),G.uniformMatrix4fv(G.getUniformLocation(Z,"a2"),!1,a),Tb(Z),cc(jb,Z);for(var n of Cc)e=-.6/33/33,n.rotation=J(va(n.axis,n.ba*b),n.rotation),n.i=A(n.i,[0,e,0],b),n.g=A(n.g,n.i,b),m=J(J(ua(n.g),ta(.25)),J(n.rotation,ua(n.offset))),G.useProgram(Z),G.uniformMatrix4fv(G.getUniformLocation(Z,"a3"),!1,m),G.uniformMatrix4fv(G.getUniformLocation(Z,
"a2"),!1,a),Tb(Z),cc(kb[n.kind],Z);yc!=c.mode&&(yc=c.mode,1==yc&&(Bc=[],Cc=[],[[rb,sb],qb]=ob[c.level]()),zc=0);G.useProgram(Z);G.uniformMatrix4fv(G.getUniformLocation(Z,"a3"),!1,xa);G.uniformMatrix4fv(G.getUniformLocation(Z,"a2"),!1,a);G.uniform3fv(G.getUniformLocation(Z,"ag"),c.g);Tb(Z);cc(rb,Z);G.disable(2884);G.useProgram($b);G.uniformMatrix4fv(G.getUniformLocation($b,"aa"),!1,J(f,d));cc(ab,$b);G.enable(2884);if((1==c.mode||2==c.mode)&&h){b=c.g;n=c.o;d=hc;h=ya(J(I(ic),H(-d)),[0,0,-1]);d=new Float32Array(900);
var w;f=qb;e=A([0,0,0],h,30);for(let r=0,u=0;150>r;++r){d[u++]=b[0];d[u++]=b[1];d[u++]=b[2];if(!w){e=t(e,[0,-.6,0]);l=b=t(b,e);for(m=0;4>m;++m)for(l=A(l,e,.25),g=0;g<f.length;++g)0<=n.indexOf(g)||(h=z(f[g],l),3600>F(h,h)&&(w=1));let [x,E,y]=vb(b);10>y&&0>F(E,e)&&(b=A(x,E,10),w=1)}d[u++]=b[0];d[u++]=b[1];d[u++]=b[2]}let [v,p]=[d,b];lc=p;G.bindBuffer(34962,Yb);G.bufferSubData(34962,0,v);G.useProgram(ac);G.uniformMatrix4fv(G.getUniformLocation(ac,"a3"),!1,xa);G.uniformMatrix4fv(G.getUniformLocation(ac,
"a2"),!1,a);G.bindBuffer(34962,Yb);w=G.getAttribLocation(ac,"a1");G.enableVertexAttribArray(w);G.vertexAttribPointer(w,3,5126,!1,0,0);G.bindBuffer(34963,Xb);G.drawElements(1,300,5123,0);Fc(a,ac,[0,1,.1])}Vb=0==c.mode||1==c.mode?Math.min((zc/1E3)**2,1):4==c.mode||5==c.mode?1-Math.min((zc/1E3)**2,1):1;w=`${c.o.length}.${c.A}.${c.mode}`;w!=Ac&&(Y.clearRect(0,0,C2.width,C2.height),Y.strokeStyle="#e56b70",Y.fillStyle="#ffdb63",Y.textAlign="center",0==c.mode?(Y.font="bold 64px sans-serif",Y.lineWidth=3,
Ec("CANNONBOLF",C2.width/2,200),Y.font="bold 16px sans-serif",Y.lineWidth=.5,Ec("CLICK TO START",C2.width/2,C2.height-100)):4==c.mode||5==c.mode?(Y.font="bold 32px sans-serif",Y.lineWidth=2,Ec(4==c.mode?"SORRY, TRY AGAIN!":c.level<pb?0<c.A?"BIRDIE!":"PAR!":"THANKS FOR PLAYING!",C2.width/2,C2.height/2)):(Y.font="bold 32px sans-serif",Y.lineWidth=2,Y.textAlign="right",Ec(c.A+" \u26ab",C2.width-20,C2.height-25-80),Ec(`${c.o.length}/${qb.length} \ud83c\udff0`,C2.width-20,C2.height-25-40),Ec(`${c.level+
1}/${pb+1} \u26f3`,C2.width-20,C2.height-25),Y.textAlign="center",Y.font="bold 16px sans-serif",Y.lineWidth=.5,Ec(ub[c.level],C2.width/2,C2.height-20)));G.disable(2929);G.useProgram(bc);G.activeTexture(33984);G.bindTexture(3553,Ub);w!=Ac&&G.texImage2D(3553,0,6408,6408,5121,C2);G.uniform1i(G.getUniformLocation(bc,"a4"),0);G.uniform4f(G.getUniformLocation(bc,"a5"),C2.width,C2.height,Vb,~~(5==c.mode&&c.level==pb));b=G.getAttribLocation(bc,"a1");G.bindBuffer(34962,Wb);G.enableVertexAttribArray(b);G.vertexAttribPointer(b,
2,5126,!1,0,0);G.drawArrays(4,0,6);G.enable(2929);Ac=w};window.onresize=Dc;Dc();[[rb,sb],qb]=ob[0]();Lc(0);
